(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2987:(e,t,s)=>{Promise.resolve().then(s.bind(s,7907))},7907:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>D});var a=s(8081),r=s(2149),i=s(1018);let n=(0,i.A)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),l=(0,i.A)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);var c=s(2184),o=s(6722);let d=(0,i.A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var m=s(7849),x=s(3210),u=s(6546),h=s(2235);let g=(0,i.A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),f=(0,i.A)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);async function b(e){try{let t=await fetch("".concat("https://api.odin.fun/v1/user/").concat(e,"/activity?page=1&limit=20&sort=time:desc"),{method:"GET",headers:{Accept:"application/json"}});if(!t.ok)throw Error("API error: ".concat(t.status));return await t.json()}catch(t){return console.error("Error fetching activity data for user ".concat(e,":"),t),null}}function p(e){return(("string"==typeof e?Number.parseFloat(e):e)/1e8/1e3).toFixed(8)}function v(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return(("string"==typeof e?Number.parseFloat(e):e)/Math.pow(10,t)/1e3).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:2})}let j=(0,i.A)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),N=(0,i.A)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);function y(e){let{activities:t}=e;if(!t||0===t.length)return(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-muted mb-4",children:(0,a.jsx)(n,{className:"w-8 h-8 text-muted-foreground"})}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"No activity available"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground/70 mt-1",children:"User activity will be displayed here"})]});let s=e=>{try{return new Date(e).toLocaleString()}catch(e){return"Неизвестное время"}},r=e=>{switch(e){case"BUY":return(0,a.jsx)(j,{className:"w-5 h-5 text-green-500"});case"SELL":return(0,a.jsx)(N,{className:"w-5 h-5 text-red-500"});case"WITHDRAWAL":return(0,a.jsx)(N,{className:"w-5 h-5 text-orange-500"});case"DEPOSIT":return(0,a.jsx)(j,{className:"w-5 h-5 text-blue-500"});default:return(0,a.jsx)(n,{className:"w-5 h-5 text-muted-foreground"})}},i=e=>{switch(e){case"BUY":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400";case"SELL":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400";case"WITHDRAWAL":return"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400";case"DEPOSIT":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400";default:return"bg-muted text-foreground"}};return(0,a.jsx)("div",{className:"space-y-3 max-h-[calc(100vh-300px)] overflow-y-auto pr-1",children:t.map((e,t)=>{var n;return(0,a.jsx)("div",{className:"p-4 bg-gray-800 border border-gray-700 rounded-lg shadow-sm hover:shadow transition-shadow duration-200",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"p-3 rounded-full ".concat(i(e.action)," flex-shrink-0"),children:r(e.action)}),(0,a.jsx)("div",{className:"flex-grow",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"font-semibold",children:[e.action,e.token&&(0,a.jsxs)("span",{className:"ml-1 font-normal text-muted-foreground",children:[e.token.name," (",e.token.ticker,")"]})]}),e.user&&(0,a.jsxs)("p",{className:"text-sm text-muted-foreground flex items-center mt-1",children:[(0,a.jsx)(u.A,{className:"inline mr-1 w-4 h-4"}),e.user.name||e.user.id]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground flex items-center mt-1",children:[(0,a.jsx)(g,{className:"inline mr-1 w-3 h-3"}),(()=>{let t=new Date(e.time),s=Math.floor((new Date().getTime()-t.getTime())/1e3);if(s<60)return"".concat(s," sec. ago");let a=Math.floor(s/60);if(a<60)return"".concat(a," min. ago");let r=Math.floor(a/60);if(r<24)return"".concat(r," hr. ago");let i=Math.floor(r/24);return"".concat(i," d. ago")})()," • ",s(e.time)]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-base",children:v(e.amount_token,null===(n=e.token)||void 0===n?void 0:n.divisibility)}),e.amount_btc&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{className:"text-sm text-muted-foreground flex items-center justify-end mt-1",children:[p(e.amount_btc)," BTC"]}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground flex justify-end mt-1 -mr-2",children:[(83800*Number(p(e.amount_btc))).toFixed(1)," ",(0,a.jsx)(l,{className:"inline mr-1 w-4 h-4"})]})]})]})]})})]})},t)})})}function w(e){let{users:t,onNewActivities:s}=e,[i,n]=(0,r.useState)(null),[l,c]=(0,r.useState)({}),[o,d]=(0,r.useState)({}),[m,x]=(0,r.useState)(!1),[u,h]=(0,r.useState)({});(0,r.useEffect)(()=>{if(t.length>0&&!i)n(t[0].id);else if(0===t.length)n(null);else if(i&&!t.find(e=>e.id===i)){var e;n((null===(e=t[0])||void 0===e?void 0:e.id)||null)}},[t,i]),(0,r.useEffect)(()=>{t.forEach(e=>{u[e.id]||p(e.id)})},[t,u]);let g=(0,r.useCallback)(async e=>{try{let a=t.find(t=>t.id===e);if(!a)return;if(!u[e]){await p(e);return}let r=new Date(a.lastActivityTime?a.lastActivityTime:a.addedAt),i=await b(e);if(!i||!i.data)return;let n=i.data.map(t=>({...t,user:{id:e,name:a.name||e}}));c(t=>{let s=t[e]||[],a=[...n,...s].filter((e,t,s)=>t===s.findIndex(t=>t.time===e.time&&t.action===e.action&&t.amount_token===e.amount_token));return a.sort((e,t)=>new Date(t.time).getTime()-new Date(e.time).getTime()),{...t,[e]:a}});let l=i.data.filter(e=>new Date(e.time)>r).map(t=>({...t,user:{id:e,name:a.name||e}}));l.length>0&&s(e,l)}catch(t){console.error("Error refreshing activities for user ".concat(e,":"),t)}},[t,u,s]),f=(0,r.useCallback)(async()=>{if(0!==t.length&&!m){x(!0);try{await Promise.all(t.map(e=>g(e.id)))}catch(e){console.error("Error refreshing activities:",e)}finally{x(!1)}}},[t,m,g]);(0,r.useEffect)(()=>{if(0===t.length)return;let e=setInterval(()=>{f()},5e3);return()=>{clearInterval(e)}},[t,f]);let p=async e=>{try{d(t=>({...t,[e]:!0}));let a=await b(e);if(a&&a.data){let r=t.find(t=>t.id===e);if(!r)return;let i=a.data.map(t=>({...t,user:{id:e,name:r.name||e}}));c(t=>({...t,[e]:i}));let n=new Date(r.addedAt),l=a.data.filter(e=>new Date(e.time)>n).map(t=>({...t,user:{id:e,name:r.name||e}}));h(t=>({...t,[e]:!0})),Date.now()-n.getTime()<5e3&&l.length>0&&s(e,l)}}catch(t){console.error("Error loading activities for user ".concat(e,":"),t)}finally{d(t=>({...t,[e]:!1}))}};return 0===t.length?(0,a.jsxs)("div",{className:"text-center py-8 px-4",children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:"No users added yet"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground/70 mt-1",children:"Add users to see their activity"})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"flex overflow-x-auto pb-2 hide-scrollbar border-b border-[#232338]",children:t.map(e=>(0,a.jsxs)("button",{onClick:()=>n(e.id),className:"px-4 py-2 text-sm font-medium whitespace-nowrap transition-colors ".concat(i===e.id?"text-blue-400 border-b-2 border-blue-400 -mb-[1px]":"text-gray-400 hover:text-gray-300"),children:[e.name||e.id,(o[e.id]||m)&&(0,a.jsx)("span",{className:"ml-2 inline-block w-2 h-2 bg-blue-400 rounded-full animate-pulse"})]},e.id))}),(0,a.jsx)("div",{className:"mt-4",children:i&&l[i]?(0,a.jsx)(y,{activities:l[i]}):(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{className:"text-muted-foreground",children:o[i||""]?"Loading activities...":"No activities found"})})})]})}var k=s(7950),A=s.n(k),S=s(9651);function D(){let e="/wallet"===(0,S.usePathname)()?"wallet":"tracker",[t,s]=(0,r.useState)(()=>{try{let e=localStorage.getItem("odin-users");return e?JSON.parse(e):[]}catch(e){return console.error("Error loading users from localStorage:",e),[]}}),[i,b]=(0,r.useState)(()=>{try{let e=localStorage.getItem("odin-activities");return e?JSON.parse(e):[]}catch(e){return console.error("Error loading activities from localStorage:",e),[]}}),[p,j]=(0,r.useState)(!1),[N,y]=(0,r.useState)(null),[k,D]=(0,r.useState)(""),[C,T]=(0,r.useState)(""),[E,I]=(0,r.useState)(""),U=(0,r.useCallback)((e,t)=>{"Notification"in window&&("granted"===Notification.permission?new Notification("Odin.fun Activity",{body:e}):"denied"!==Notification.permission&&Notification.requestPermission().then(t=>{"granted"===t&&new Notification("Odin.fun Activity",{body:e})})),y({message:e,type:"success"}),setTimeout(()=>y(null),5e3)},[]),z=(0,r.useCallback)(e=>{var t,s,a,r;let i=(null===(t=e.user)||void 0===t?void 0:t.name)||(null===(s=e.user)||void 0===s?void 0:s.id)||"Unknown user",n=e.action.toLowerCase(),l=(null===(a=e.token)||void 0===a?void 0:a.name)||"tokens",c=v(e.amount_token,null===(r=e.token)||void 0===r?void 0:r.divisibility);return"".concat(i," ").concat(n," ").concat(c," ").concat(l)},[]),O=(0,r.useCallback)((e,t)=>{var a;if(0===t.length)return;b(e=>[...t,...e].filter((e,t,s)=>t===s.findIndex(t=>{var s,a;return t.time===e.time&&t.action===e.action&&t.amount_token===e.amount_token&&(null===(s=t.user)||void 0===s?void 0:s.id)===(null===(a=e.user)||void 0===a?void 0:a.id)})).slice(0,100)),t.forEach(e=>{U(z(e),e)});let r=new Date((null===(a=t[0])||void 0===a?void 0:a.time)||Date.now());s(t=>t.map(t=>t.id===e?{...t,lastActivityTime:r.toISOString()}:t))},[z,U]),L=(0,r.useCallback)(()=>{if(!k.trim()){I("User ID is required");return}let e=k.trim(),t=C.trim()||e;s(s=>{if(s.some(t=>t.id===e))return I("User ".concat(e," is already being tracked")),s;let a=[...s,{id:e,name:t,addedAt:new Date().toISOString(),lastActivityTime:new Date().toISOString()}];return y({message:"User ".concat(t," added for tracking"),type:"success"}),D(""),T(""),I(""),a})},[k,C]),M=(0,r.useCallback)(e=>{s(t=>{let s=t.find(t=>t.id===e);return s?(y({message:"User ".concat(s.name||e," removed from tracking"),type:"success"}),t.filter(t=>t.id!==e)):t})},[]),_=e=>{switch(e){case"BUY":return{icon:(0,a.jsx)(n,{size:16}),bgClass:"bg-emerald-900/60",textClass:"text-emerald-400"};case"SELL":return{icon:(0,a.jsx)(n,{size:16}),bgClass:"bg-rose-900/60",textClass:"text-rose-400"};case"WITHDRAWAL":return{icon:(0,a.jsx)(l,{size:16}),bgClass:"bg-amber-900/60",textClass:"text-amber-400"};case"DEPOSIT":return{icon:(0,a.jsx)(l,{size:16}),bgClass:"bg-blue-900/60",textClass:"text-blue-400"};default:return{icon:(0,a.jsx)(n,{size:16}),bgClass:"bg-purple-900/60",textClass:"text-purple-400"}}};return(0,r.useEffect)(()=>{console.log("Users changed:",t),localStorage.setItem("odin-users",JSON.stringify(t))},[t]),(0,r.useEffect)(()=>{console.log("Activities changed:",i),localStorage.setItem("odin-activities",JSON.stringify(i))},[i]),(0,a.jsxs)("div",{className:"bg-[#0a0a0f] min-h-screen text-gray-100",children:[(0,a.jsx)("header",{className:"bg-[#12121a] border-b border-[#232338] p-4",children:(0,a.jsxs)("div",{className:"container mx-auto max-w-7xl flex items-center justify-between",children:[(0,a.jsx)("h1",{className:"text-xl font-bold bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent",children:"Odin Tools"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(A(),{href:"/",className:"px-4 py-2 rounded-lg transition-colors ".concat("tracker"===e?"bg-blue-900/40 text-blue-400":"text-gray-400 hover:text-gray-300"),children:"Tracker"}),(0,a.jsx)(A(),{href:"/wallet",className:"px-4 py-2 rounded-lg transition-colors ".concat("wallet"===e?"bg-blue-900/40 text-blue-400":"text-gray-400 hover:text-gray-300"),children:"Copy Trade"}),p?(0,a.jsxs)("div",{className:"flex items-center text-xs text-gray-400",children:[(0,a.jsx)(c.A,{className:"animate-spin mr-2",size:14}),"Syncing..."]}):(0,a.jsxs)("div",{className:"flex items-center text-xs text-green-400",children:[(0,a.jsx)(o.A,{className:"mr-2",size:14}),"In sync"]})]})]})}),N&&(0,a.jsx)("div",{className:"fixed top-4 right-4 z-50 max-w-md",children:(0,a.jsxs)("div",{className:"rounded-lg shadow-lg p-4 flex items-start ".concat("success"===N.type?"bg-green-900/90 text-green-100":"bg-red-900/90 text-red-100"),children:[(0,a.jsx)("div",{className:"flex-grow",children:(0,a.jsx)("p",{children:N.message})}),(0,a.jsx)("button",{onClick:()=>y(null),className:"ml-3 flex-shrink-0",children:(0,a.jsx)(d,{size:16})})]})}),(0,a.jsx)("main",{className:"container mx-auto max-w-7xl p-4 mt-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"order-2 lg:order-1",children:[(0,a.jsxs)("div",{className:"bg-[#12121a] border border-[#232338] rounded-xl p-5 mb-6",children:[(0,a.jsx)("h2",{className:"text-lg font-medium mb-4 text-blue-300",children:"Track New User"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-xs text-gray-400 mb-1",children:["User ID ",(0,a.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,a.jsx)("input",{type:"text",value:k,onChange:e=>D(e.target.value),placeholder:"e.g. abcde-fghij-klmno",className:"w-full bg-[#1a1a25] border border-[#323245] rounded-lg p-3 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:"Display Name (optional)"}),(0,a.jsx)("input",{type:"text",value:C,onChange:e=>T(e.target.value),placeholder:"e.g. John Doe",className:"w-full bg-[#1a1a25] border border-[#323245] rounded-lg p-3 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),E&&(0,a.jsxs)("div",{className:"bg-red-900/40 border border-red-800 text-red-300 p-3 rounded-lg text-sm flex items-start",children:[(0,a.jsx)(m.A,{size:16,className:"mr-2 mt-0.5 flex-shrink-0"}),(0,a.jsx)("span",{children:E})]}),(0,a.jsxs)("button",{onClick:L,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 text-white font-medium p-3 rounded-lg flex items-center justify-center transition-all duration-200",children:[(0,a.jsx)(x.A,{size:16,className:"mr-2"}),"Add User"]})]})]}),(0,a.jsxs)("div",{className:"bg-[#12121a] border border-[#232338] rounded-xl p-5",children:[(0,a.jsx)("h2",{className:"text-lg font-medium mb-4 text-blue-300",children:"Tracked Users"}),0===t.length?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(u.A,{className:"mx-auto mb-2 opacity-30",size:32}),(0,a.jsx)("p",{children:"No users added yet"}),(0,a.jsx)("p",{className:"text-xs mt-1",children:"Add a user above to start tracking"})]}):(0,a.jsx)("div",{className:"space-y-3",children:t.map(e=>(0,a.jsxs)("div",{className:"bg-[#1a1a25] border border-[#323245] rounded-lg p-3 flex items-center justify-between",children:[(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"bg-[#232338] p-2 rounded-lg mr-3",children:(0,a.jsx)(u.A,{size:14,className:"text-purple-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-sm",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:e.id})]})]})}),(0,a.jsx)("button",{onClick:()=>M(e.id),className:"p-2 hover:bg-red-900/30 rounded-lg text-gray-400 hover:text-red-400 transition-colors",children:(0,a.jsx)(h.A,{size:14})})]},e.id))})]}),(0,a.jsxs)("div",{className:"bg-[#12121a] border border-[#232338] rounded-xl p-5 mt-6",children:[(0,a.jsx)("h2",{className:"text-lg font-medium mb-4 text-blue-300",children:"Information"}),(0,a.jsxs)("div",{className:"text-sm text-gray-400 space-y-3",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{className:"text-blue-300",children:"Finding a user's ID:"}),' Navigate to their Odin.fun profile and check the URL in your browser. The ID appears after "odin.fun/user/" in the address bar. Example: odin.fun/user/',(0,a.jsx)("span",{className:"text-blue-400",children:"abcde-fghij-klmno"})]}),(0,a.jsx)("p",{children:"This tracker monitors Odin.fun user activities and delivers instant notifications whenever tracked users take any actions on the platform."})]})]})]}),(0,a.jsx)("div",{className:"lg:col-span-2 order-1 lg:order-2",children:(0,a.jsxs)("div",{className:"bg-[#12121a] border border-[#232338] rounded-xl p-5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-blue-300",children:"User Activities"}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 flex items-center",children:[(0,a.jsx)(g,{size:14,className:"mr-1"}),"Real-time updates"]})]}),(0,a.jsx)(w,{users:t,onNewActivities:O}),i.length>0&&(0,a.jsxs)("div",{className:"mt-8 pt-6 border-t border-[#232338]",children:[(0,a.jsxs)("h3",{className:"text-md font-medium mb-4 text-blue-300 flex items-center",children:[(0,a.jsx)(f,{size:16,className:"mr-2"}),"Recent Notifications"]}),(0,a.jsx)("div",{className:"space-y-2 max-h-[200px] overflow-y-auto pr-1 custom-scrollbar",children:i.slice(0,5).map((e,t)=>{var s,r,i;let{icon:n,bgClass:l,textClass:c}=_(e.action);return(0,a.jsxs)("div",{className:"bg-[#1a1a25] border border-[#323245] rounded-lg p-3 flex items-center text-sm",children:[(0,a.jsx)("div",{className:"p-1.5 rounded-lg ".concat(l," mr-3 flex-shrink-0"),children:(0,a.jsx)("div",{className:c,children:n})}),(0,a.jsx)("div",{className:"flex-grow min-w-0",children:(0,a.jsxs)("p",{className:"text-xs",children:[(0,a.jsx)("span",{className:"font-medium text-gray-300",children:(null===(s=e.user)||void 0===s?void 0:s.name)||"User"})," ",(0,a.jsx)("span",{className:c,children:e.action.toLowerCase()})," ",(0,a.jsxs)("span",{className:"text-gray-400",children:[v(e.amount_token,null===(r=e.token)||void 0===r?void 0:r.divisibility)," ",null===(i=e.token)||void 0===i?void 0:i.name]})]})}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:function(e){let t=new Date(e),s=Math.floor((new Date().getTime()-t.getTime())/1e3);return s<60?"".concat(s,"s ago"):s<3600?"".concat(Math.floor(s/60),"m ago"):s<86400?"".concat(Math.floor(s/3600),"h ago"):"".concat(Math.floor(s/86400),"d ago")}(e.time)})]},t)})})]})]})})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[813,497,954,358],()=>t(2987)),_N_E=e.O()}]);